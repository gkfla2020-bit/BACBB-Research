<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒŒì´ì¬ ê¸ˆìœµë…¼ë¬¸ ì™„ì „ ì´ˆë³´ ê°€ì´ë“œ</title>
    <style>
        @media print {
            body { font-size: 11pt; }
            pre { page-break-inside: avoid; }
            h1, h2, h3 { page-break-after: avoid; }
        }
        
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.8;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            color: #333;
            background: #fff;
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-top: 40px;
        }
        
        h2 {
            color: #2980b9;
            border-bottom: 2px solid #bdc3c7;
            padding-bottom: 10px;
            margin-top: 35px;
        }
        
        h3 {
            color: #27ae60;
            margin-top: 25px;
        }
        
        h4 {
            color: #8e44ad;
            margin-top: 20px;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            line-height: 1.5;
            margin: 20px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: #f8f8f2;
            font-size: 0.85em;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background: #3498db;
            color: white;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 20px 0;
            padding: 15px 20px;
            background: #f8f9fa;
            color: #555;
        }
        
        hr {
            border: none;
            border-top: 2px solid #eee;
            margin: 40px 0;
        }
        
        ul, ol {
            padding-left: 25px;
        }
        
        li {
            margin: 8px 0;
        }
        
        /* ì´ëª¨ì§€ ìŠ¤íƒ€ì¼ */
        .emoji {
            font-size: 1.2em;
        }
        
        /* íŒ ë°•ìŠ¤ */
        p:has(strong:first-child) {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
        
        /* ë§í¬ */
        a {
            color: #3498db;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        /* ëª©ì°¨ */
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 20px;
        }
        
        .toc a {
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <h1 id="_1">ğŸ£ íŒŒì´ì¬ ê¸ˆìœµë…¼ë¬¸ ì™„ì „ ì´ˆë³´ ê°€ì´ë“œ</h1>
<blockquote>
<p>AI ì—†ì´ í˜¼ìì„œ ê¸ˆìœµ ë…¼ë¬¸ê³¼ ë¶„ì„ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•œ ì™„ì „ ì´ˆë³´ììš© ê°€ì´ë“œ</p>
<p>ì´ ê°€ì´ë“œëŠ” "ì´ˆë”©í•œí…Œ ì•Œë ¤ì£¼ë“¯" í•˜ë‚˜í•˜ë‚˜ ì„¤ëª…í•©ë‹ˆë‹¤. ì²œì²œíˆ ë”°ë¼ì˜¤ì„¸ìš”!</p>
</blockquote>
<hr />
<h2 id="_2">ğŸ“š ëª©ì°¨</h2>
<ol>
<li><a href="#1-íŒŒì´ì¬-ê¸°ì´ˆ---ì§„ì§œ-ê¸°ì´ˆë¶€í„°">íŒŒì´ì¬ ê¸°ì´ˆ - ì§„ì§œ ê¸°ì´ˆë¶€í„°</a></li>
<li><a href="#2-pandas---ë°ì´í„°-ë‹¤ë£¨ê¸°">pandas - ë°ì´í„° ë‹¤ë£¨ê¸°</a></li>
<li><a href="#3-ê¸ˆìœµ-ë°ì´í„°-ë¶„ì„-ê¸°ì´ˆ">ê¸ˆìœµ ë°ì´í„° ë¶„ì„ ê¸°ì´ˆ</a></li>
<li><a href="#4-ì•„ì´ë””ì–´--ë…¼ë¬¸-íë¦„">ì•„ì´ë””ì–´ â†’ ë…¼ë¬¸ íë¦„</a></li>
<li><a href="#5-bacbb-ì½”ë“œ-í•œì¤„í•œì¤„-í•´ì„¤">BACBB ì½”ë“œ í•œì¤„í•œì¤„ í•´ì„¤</a></li>
<li><a href="#6-í†µê³„-ê²€ì •-ë°©ë²•">í†µê³„ ê²€ì • ë°©ë²•</a></li>
<li><a href="#7-ê·¸ë˜í”„ì™€-í‘œ-ë§Œë“¤ê¸°">ê·¸ë˜í”„ì™€ í‘œ ë§Œë“¤ê¸°</a></li>
<li><a href="#8-ì‹¤ì „-íŒê³¼-ìì£¼-í•˜ëŠ”-ì‹¤ìˆ˜">ì‹¤ì „ íŒê³¼ ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜</a></li>
</ol>
<hr />
<h2 id="1-">1. íŒŒì´ì¬ ê¸°ì´ˆ - ì§„ì§œ ê¸°ì´ˆë¶€í„°</h2>
<h3 id="11">1.1 ë³€ìˆ˜ë€?</h3>
<p>ë³€ìˆ˜ëŠ” <strong>ê°’ì„ ë‹´ëŠ” ìƒì</strong>ì˜ˆìš”. ìƒìì— ì´ë¦„í‘œë¥¼ ë¶™ì—¬ì„œ ë‚˜ì¤‘ì— êº¼ë‚´ ì“¸ ìˆ˜ ìˆì–´ìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ìˆ«ì ë‹´ê¸°
price = 100          # priceë¼ëŠ” ìƒìì— 100ì„ ë„£ìŒ
return_rate = 0.05   # return_rateë¼ëŠ” ìƒìì— 0.05ë¥¼ ë„£ìŒ

# ë¬¸ì ë‹´ê¸°
coin_name = &quot;BTC&quot;    # coin_nameì´ë¼ëŠ” ìƒìì— &quot;BTC&quot;ë¥¼ ë„£ìŒ

# ê³„ì‚°í•˜ê¸°
new_price = price * (1 + return_rate)  # 100 * 1.05 = 105
print(new_price)     # í™”ë©´ì— 105 ì¶œë ¥
</code></pre>
<p><strong>ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸:</strong>
- <code>=</code>ëŠ” "ê°™ë‹¤"ê°€ ì•„ë‹ˆë¼ "ë„£ëŠ”ë‹¤"ë¼ëŠ” ëœ»!
- ë³€ìˆ˜ ì´ë¦„ì€ ì˜ì–´ë¡œ, ì˜ë¯¸ ìˆê²Œ ì§“ê¸° (ì˜ˆ: <code>price</code>, <code>return_rate</code>)
- ë„ì–´ì“°ê¸° ëŒ€ì‹  <code>_</code> ì‚¬ìš© (ì˜ˆ: <code>coin_name</code>)</p>
<h3 id="12-list">1.2 ë¦¬ìŠ¤íŠ¸ (List)</h3>
<p>ë¦¬ìŠ¤íŠ¸ëŠ” <strong>ì—¬ëŸ¬ ê°’ì„ ìˆœì„œëŒ€ë¡œ ë‹´ëŠ” ìƒì</strong>ì˜ˆìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ì½”ì¸ ì´ë¦„ë“¤ì„ ë¦¬ìŠ¤íŠ¸ë¡œ
coins = [&quot;BTC&quot;, &quot;ETH&quot;, &quot;XRP&quot;, &quot;SOL&quot;]

# ì²« ë²ˆì§¸ ì½”ì¸ êº¼ë‚´ê¸° (0ë¶€í„° ì‹œì‘!)
first_coin = coins[0]   # &quot;BTC&quot;
print(first_coin)

# ë‘ ë²ˆì§¸ ì½”ì¸
second_coin = coins[1]  # &quot;ETH&quot;

# ë§ˆì§€ë§‰ ì½”ì¸ (-1ì€ ë’¤ì—ì„œ ì²« ë²ˆì§¸)
last_coin = coins[-1]   # &quot;SOL&quot;

# ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ (ëª‡ ê°œ ìˆë‚˜?)
count = len(coins)      # 4
</code></pre>
<p><strong>ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸:</strong>
- ì¸ë±ìŠ¤ëŠ” 0ë¶€í„° ì‹œì‘! (ì²« ë²ˆì§¸ = 0, ë‘ ë²ˆì§¸ = 1)
- <code>len()</code>ìœ¼ë¡œ ê°œìˆ˜ ì„¸ê¸°
- <code>-1</code>ì€ ë§ˆì§€ë§‰, <code>-2</code>ëŠ” ë’¤ì—ì„œ ë‘ ë²ˆì§¸</p>
<h3 id="13-dictionary">1.3 ë”•ì…”ë„ˆë¦¬ (Dictionary)</h3>
<p>ë”•ì…”ë„ˆë¦¬ëŠ” <strong>ì´ë¦„í‘œê°€ ë¶™ì€ ì„œëì¥</strong>ì´ì—ìš”. ì´ë¦„ìœ¼ë¡œ ê°’ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ì½”ì¸ë³„ ê°€ê²©
prices = {
    &quot;BTC&quot;: 50000,
    &quot;ETH&quot;: 3000,
    &quot;XRP&quot;: 0.5
}

# BTC ê°€ê²© êº¼ë‚´ê¸°
btc_price = prices[&quot;BTC&quot;]  # 50000

# ìƒˆ ì½”ì¸ ì¶”ê°€
prices[&quot;SOL&quot;] = 100

# ëª¨ë“  ì½”ì¸ ì´ë¦„ ë³´ê¸°
coin_names = list(prices.keys())  # [&quot;BTC&quot;, &quot;ETH&quot;, &quot;XRP&quot;, &quot;SOL&quot;]
</code></pre>
<h3 id="14-for-loop">1.4 ë°˜ë³µë¬¸ (for loop)</h3>
<p>ê°™ì€ ì‘ì—…ì„ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µí•  ë•Œ ì‚¬ìš©í•´ìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ëª¨ë“  ì½”ì¸ ì´ë¦„ ì¶œë ¥í•˜ê¸°
coins = [&quot;BTC&quot;, &quot;ETH&quot;, &quot;XRP&quot;]

for coin in coins:
    print(coin)
# ì¶œë ¥:
# BTC
# ETH
# XRP

# ê° ì½”ì¸ì˜ ìˆ˜ìµë¥  ê³„ì‚°í•˜ê¸°
returns = [0.05, -0.02, 0.10]

for i, ret in enumerate(returns):
    print(f&quot;{i}ë²ˆì§¸ ìˆ˜ìµë¥ : {ret * 100}%&quot;)
# ì¶œë ¥:
# 0ë²ˆì§¸ ìˆ˜ìµë¥ : 5.0%
# 1ë²ˆì§¸ ìˆ˜ìµë¥ : -2.0%
# 2ë²ˆì§¸ ìˆ˜ìµë¥ : 10.0%
</code></pre>
<p><strong>ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸:</strong>
- <code>for ë³€ìˆ˜ in ë¦¬ìŠ¤íŠ¸:</code> í˜•íƒœë¡œ ì‚¬ìš©
- ë“¤ì—¬ì“°ê¸°(ìŠ¤í˜ì´ìŠ¤ 4ì¹¸)ê°€ ì¤‘ìš”! ë“¤ì—¬ì“´ ë¶€ë¶„ì´ ë°˜ë³µë¨
- <code>enumerate()</code>ë¥¼ ì“°ë©´ ìˆœì„œ ë²ˆí˜¸ë„ ê°™ì´ ë°›ì„ ìˆ˜ ìˆìŒ</p>
<h3 id="15-if">1.5 ì¡°ê±´ë¬¸ (if)</h3>
<p>ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥¸ í–‰ë™ì„ í•  ë•Œ ì‚¬ìš©í•´ìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">return_rate = 0.05

if return_rate &gt; 0:
    print(&quot;ìˆ˜ìµ!&quot;)
elif return_rate &lt; 0:
    print(&quot;ì†ì‹¤...&quot;)
else:
    print(&quot;ë³¸ì „&quot;)

# í•œ ì¤„ë¡œ ì“°ê¸° (ì‚¼í•­ ì—°ì‚°ì)
result = &quot;ìˆ˜ìµ&quot; if return_rate &gt; 0 else &quot;ì†ì‹¤&quot;
</code></pre>
<h3 id="16-function">1.6 í•¨ìˆ˜ (Function)</h3>
<p>ìì£¼ ì“°ëŠ” ì½”ë“œë¥¼ ë¬¶ì–´ì„œ ì´ë¦„ ë¶™ì—¬ë†“ì€ ê±°ì˜ˆìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># í•¨ìˆ˜ ë§Œë“¤ê¸°
def calculate_return(buy_price, sell_price):
    &quot;&quot;&quot;
    ìˆ˜ìµë¥ ì„ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜

    Parameters:
    - buy_price: ë§¤ìˆ˜ ê°€ê²©
    - sell_price: ë§¤ë„ ê°€ê²©

    Returns:
    - ìˆ˜ìµë¥  (ì†Œìˆ˜ì )
    &quot;&quot;&quot;
    return_rate = (sell_price - buy_price) / buy_price
    return return_rate

# í•¨ìˆ˜ ì‚¬ìš©í•˜ê¸°
my_return = calculate_return(100, 110)  # 0.1 (10%)
print(f&quot;ìˆ˜ìµë¥ : {my_return * 100}%&quot;)
</code></pre>
<p><strong>ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸:</strong>
- <code>def í•¨ìˆ˜ì´ë¦„(ì…ë ¥ê°’):</code> í˜•íƒœë¡œ ë§Œë“¦
- <code>return</code>ìœ¼ë¡œ ê²°ê³¼ ëŒë ¤ì¤Œ
- <code>"""</code> ì•ˆì— ì„¤ëª… ì“°ë©´ ë‚˜ì¤‘ì— ë­í•˜ëŠ” í•¨ìˆ˜ì¸ì§€ ì•Œ ìˆ˜ ìˆìŒ</p>
<hr />
<h2 id="2-pandas-">2. pandas - ë°ì´í„° ë‹¤ë£¨ê¸°</h2>
<p>pandasëŠ” <strong>ì—‘ì…€ ê°™ì€ í‘œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ë„êµ¬</strong>ì˜ˆìš”. ê¸ˆìœµ ë¶„ì„ì˜ í•µì‹¬!</p>
<h3 id="21-pandas">2.1 pandas ë¶ˆëŸ¬ì˜¤ê¸°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">import pandas as pd   # pandasë¥¼ pdë¼ëŠ” ë³„ëª…ìœ¼ë¡œ ë¶€ë¦„
import numpy as np    # numpyë¥¼ npë¼ëŠ” ë³„ëª…ìœ¼ë¡œ ë¶€ë¦„ (ìˆ˜í•™ ê³„ì‚°ìš©)
</code></pre>
<p><strong>ğŸ’¡ ì™œ ë³„ëª…ì„ ì“°ë‚˜ìš”?</strong>
- <code>pandas.read_csv()</code> ëŒ€ì‹  <code>pd.read_csv()</code>ë¡œ ì§§ê²Œ ì“¸ ìˆ˜ ìˆì–´ìš”
- ì „ ì„¸ê³„ ê°œë°œìë“¤ì´ ë‹¤ ì´ë ‡ê²Œ ì¨ì„œ ì•½ì†ì²˜ëŸ¼ ëì–´ìš”</p>
<h3 id="22">2.2 ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># CSV íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
prices = pd.read_csv('04_daily_prices.csv')

# ì²˜ìŒ 5ì¤„ ë³´ê¸°
print(prices.head())

# ë§ˆì§€ë§‰ 5ì¤„ ë³´ê¸°
print(prices.tail())

# ë°ì´í„° ì •ë³´ ë³´ê¸°
print(prices.info())

# ë°ì´í„° í¬ê¸° (í–‰, ì—´)
print(prices.shape)  # (1000, 50) = 1000í–‰, 50ì—´
</code></pre>
<h3 id="23">2.3 ë‚ ì§œë¥¼ ì¸ë±ìŠ¤ë¡œ ì„¤ì •í•˜ê¸°</h3>
<p>ê¸ˆìœµ ë°ì´í„°ëŠ” ë‚ ì§œê°€ í•µì‹¬ì´ì—ìš”!</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ë‚ ì§œ ì»¬ëŸ¼ì„ ì¸ë±ìŠ¤ë¡œ ì„¤ì •
prices = pd.read_csv('04_daily_prices.csv', 
                     index_col=0,        # ì²« ë²ˆì§¸ ì—´ì„ ì¸ë±ìŠ¤ë¡œ
                     parse_dates=True)   # ë‚ ì§œë¡œ ì¸ì‹í•˜ê²Œ

# ì´ì œ ë‚ ì§œë¡œ ë°ì´í„° ì°¾ê¸° ê°€ëŠ¥
print(prices.loc['2024-01-01'])  # 2024ë…„ 1ì›” 1ì¼ ë°ì´í„°
</code></pre>
<p><strong>ğŸ’¡ index_col=0 ì´ ë­ì˜ˆìš”?</strong>
- CSV íŒŒì¼ì˜ ì²« ë²ˆì§¸ ì—´(0ë²ˆ)ì„ í–‰ ì´ë¦„(ì¸ë±ìŠ¤)ìœ¼ë¡œ ì“°ê² ë‹¤ëŠ” ëœ»
- ë³´í†µ ì²« ë²ˆì§¸ ì—´ì— ë‚ ì§œê°€ ìˆì–´ìš”</p>
<h3 id="24">2.4 íŠ¹ì • ì—´/í–‰ ì„ íƒí•˜ê¸°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># íŠ¹ì • ì—´ ì„ íƒ (BTC ê°€ê²©ë§Œ)
btc_prices = prices['BTC']

# ì—¬ëŸ¬ ì—´ ì„ íƒ
selected = prices[['BTC', 'ETH', 'XRP']]

# íŠ¹ì • ë‚ ì§œ ë²”ìœ„ ì„ íƒ
prices_2024 = prices['2024-01-01':'2024-12-31']

# ì¡°ê±´ìœ¼ë¡œ ì„ íƒ (BTCê°€ 50000 ì´ìƒì¸ ë‚ ë§Œ)
high_btc = prices[prices['BTC'] &gt; 50000]
</code></pre>
<h3 id="25">2.5 ê¸°ë³¸ í†µê³„ ê³„ì‚°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># í‰ê· 
mean_price = prices['BTC'].mean()

# í‘œì¤€í¸ì°¨ (ë³€ë™ì„±)
std_price = prices['BTC'].std()

# ìµœëŒ€/ìµœì†Œ
max_price = prices['BTC'].max()
min_price = prices['BTC'].min()

# í•œë²ˆì— ë‹¤ ë³´ê¸°
print(prices['BTC'].describe())
</code></pre>
<h3 id="26">2.6 ìˆ˜ìµë¥  ê³„ì‚°í•˜ê¸°</h3>
<p>ì´ê²Œ ê¸ˆìœµ ë¶„ì„ì˜ í•µì‹¬ì´ì—ìš”!</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ì¼ê°„ ìˆ˜ìµë¥  ê³„ì‚°
# pct_change() = (ì˜¤ëŠ˜ - ì–´ì œ) / ì–´ì œ
returns = prices.pct_change()

# ì²« ë²ˆì§¸ í–‰ì€ NaN (ì–´ì œê°€ ì—†ìœ¼ë‹ˆê¹Œ)
# ê·¸ë˜ì„œ ë³´í†µ ì œê±°í•¨
returns = returns.dropna()

# ë¡œê·¸ ìˆ˜ìµë¥  (í•™ìˆ  ë…¼ë¬¸ì—ì„œ ë§ì´ ì”€)
log_returns = np.log(prices / prices.shift(1))
</code></pre>
<p><strong>ğŸ’¡ ì™œ ë¡œê·¸ ìˆ˜ìµë¥ ì„ ì“°ë‚˜ìš”?</strong>
- ìˆ˜í•™ì ìœ¼ë¡œ ë” ì¢‹ì€ ì„±ì§ˆì´ ìˆì–´ìš” (ë”í•˜ê¸°ê°€ ê°€ëŠ¥)
- ì •ê·œë¶„í¬ì— ë” ê°€ê¹Œì›Œìš”
- ë…¼ë¬¸ì—ì„œëŠ” ë¡œê·¸ ìˆ˜ìµë¥ ì„ ë§ì´ ì¨ìš”</p>
<h3 id="27-nan">2.7 ê²°ì¸¡ì¹˜(NaN) ì²˜ë¦¬</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># NaN í™•ì¸
print(prices.isna().sum())  # ê° ì—´ë³„ NaN ê°œìˆ˜

# NaN ì œê±°
clean_data = prices.dropna()

# NaNì„ 0ìœ¼ë¡œ ì±„ìš°ê¸°
filled_data = prices.fillna(0)

# NaNì„ ì•ì˜ ê°’ìœ¼ë¡œ ì±„ìš°ê¸° (forward fill)
filled_data = prices.fillna(method='ffill')

# NaNì„ ë’¤ì˜ ê°’ìœ¼ë¡œ ì±„ìš°ê¸° (backward fill)
filled_data = prices.fillna(method='bfill')
</code></pre>
<h3 id="28">2.8 ì´ë™í‰ê·  ê³„ì‚°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># 20ì¼ ì´ë™í‰ê· 
ma_20 = prices['BTC'].rolling(window=20).mean()

# 60ì¼ ì´ë™í‰ê· 
ma_60 = prices['BTC'].rolling(window=60).mean()

# ì´ë™ í‘œì¤€í¸ì°¨ (ë³€ë™ì„±)
rolling_std = prices['BTC'].rolling(window=20).std()
</code></pre>
<p><strong>ğŸ’¡ rolling(window=20)ì´ ë­ì˜ˆìš”?</strong>
- "20ê°œì”© ë¬¶ì–´ì„œ"ë¼ëŠ” ëœ»
- ì˜¤ëŠ˜ ê¸°ì¤€ ìµœê·¼ 20ì¼ ë°ì´í„°ë¡œ í‰ê·  ê³„ì‚°
- ë§¤ì¼ í•œ ì¹¸ì”© ì´ë™í•˜ë©´ì„œ ê³„ì‚° (ê·¸ë˜ì„œ "ì´ë™"í‰ê· )</p>
<hr />
<h2 id="3">3. ê¸ˆìœµ ë°ì´í„° ë¶„ì„ ê¸°ì´ˆ</h2>
<h3 id="31">3.1 í•µì‹¬ ì§€í‘œë“¤</h3>
<p>ê¸ˆìœµ ë…¼ë¬¸ì—ì„œ ê¼­ ë‚˜ì˜¤ëŠ” ì§€í‘œë“¤ì´ì—ìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">import pandas as pd
import numpy as np
from scipy import stats

def calculate_metrics(returns):
    &quot;&quot;&quot;
    ì „ëµì˜ ì„±ê³¼ ì§€í‘œë¥¼ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜

    Parameters:
    - returns: ì¼ê°„ ìˆ˜ìµë¥  Series

    Returns:
    - dict: ê°ì¢… ì„±ê³¼ ì§€í‘œ
    &quot;&quot;&quot;
    # ì—°ê°„í™” (ì¼ê°„ â†’ ì—°ê°„)
    # 1ë…„ = ì•½ 252 ê±°ë˜ì¼
    ann_return = returns.mean() * 252           # ì—°ê°„ ìˆ˜ìµë¥ 
    ann_volatility = returns.std() * np.sqrt(252)  # ì—°ê°„ ë³€ë™ì„±

    # ìƒ¤í”„ ë¹„ìœ¨ = ìˆ˜ìµë¥  / ë³€ë™ì„±
    # &quot;ìœ„í—˜ ëŒ€ë¹„ ìˆ˜ìµ&quot;ì„ ë‚˜íƒ€ëƒ„
    sharpe_ratio = ann_return / ann_volatility

    # ì†Œë¥´í‹°ë…¸ ë¹„ìœ¨ = ìˆ˜ìµë¥  / í•˜ë½ ë³€ë™ì„±
    # ì†ì‹¤ë§Œ ê³ ë ¤í•œ ìœ„í—˜ ëŒ€ë¹„ ìˆ˜ìµ
    downside_returns = returns[returns &lt; 0]
    downside_vol = downside_returns.std() * np.sqrt(252)
    sortino_ratio = ann_return / downside_vol

    # ìµœëŒ€ ë‚™í­ (MDD)
    cumulative = (1 + returns).cumprod()  # ëˆ„ì  ìˆ˜ìµ
    rolling_max = cumulative.cummax()      # ì—­ëŒ€ ìµœê³ ì 
    drawdown = (cumulative - rolling_max) / rolling_max
    max_drawdown = drawdown.min()

    # ìŠ¹ë¥ 
    win_rate = (returns &gt; 0).mean()

    return {
        'ann_return': ann_return,
        'ann_volatility': ann_volatility,
        'sharpe_ratio': sharpe_ratio,
        'sortino_ratio': sortino_ratio,
        'max_drawdown': max_drawdown,
        'win_rate': win_rate
    }
</code></pre>
<p><strong>ğŸ’¡ ê° ì§€í‘œ ì„¤ëª…:</strong></p>
<table>
<thead>
<tr>
<th>ì§€í‘œ</th>
<th>ì˜ë¯¸</th>
<th>ì¢‹ì€ ê°’</th>
</tr>
</thead>
<tbody>
<tr>
<td>ì—°ê°„ ìˆ˜ìµë¥ </td>
<td>1ë…„ì— ì–¼ë§ˆ ë²„ë‚˜</td>
<td>ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ</td>
</tr>
<tr>
<td>ë³€ë™ì„±</td>
<td>ì–¼ë§ˆë‚˜ ì¶œë ì´ë‚˜</td>
<td>ë‚®ì„ìˆ˜ë¡ ì•ˆì •ì </td>
</tr>
<tr>
<td>ìƒ¤í”„ ë¹„ìœ¨</td>
<td>ìœ„í—˜ ëŒ€ë¹„ ìˆ˜ìµ</td>
<td>1 ì´ìƒì´ë©´ ì¢‹ìŒ, 2 ì´ìƒì´ë©´ í›Œë¥­</td>
</tr>
<tr>
<td>ì†Œë¥´í‹°ë…¸ ë¹„ìœ¨</td>
<td>ì†ì‹¤ ìœ„í—˜ ëŒ€ë¹„ ìˆ˜ìµ</td>
<td>ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ</td>
</tr>
<tr>
<td>MDD</td>
<td>ìµœì•…ì˜ ì†ì‹¤</td>
<td>ì‘ì„ìˆ˜ë¡ ì¢‹ìŒ (ë³´í†µ ìŒìˆ˜)</td>
</tr>
<tr>
<td>ìŠ¹ë¥ </td>
<td>ëˆ ë²ˆ ë‚  ë¹„ìœ¨</td>
<td>50% ì´ìƒì´ë©´ ì¢‹ìŒ</td>
</tr>
</tbody>
</table>
<h3 id="32-beta">3.2 ë² íƒ€(Beta) ê³„ì‚°</h3>
<p>ë² íƒ€ëŠ” <strong>ì‹œì¥ê³¼ ì–¼ë§ˆë‚˜ ê°™ì´ ì›€ì§ì´ë‚˜</strong>ë¥¼ ë‚˜íƒ€ë‚´ìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def calculate_beta(asset_returns, market_returns):
    &quot;&quot;&quot;
    ë² íƒ€ ê³„ì‚°

    ë² íƒ€ = Cov(ìì‚°, ì‹œì¥) / Var(ì‹œì¥)

    - ë² íƒ€ &gt; 1: ì‹œì¥ë³´ë‹¤ ë” ë§ì´ ì›€ì§ì„ (ê³µê²©ì )
    - ë² íƒ€ = 1: ì‹œì¥ê³¼ ë˜‘ê°™ì´ ì›€ì§ì„
    - ë² íƒ€ &lt; 1: ì‹œì¥ë³´ë‹¤ ëœ ì›€ì§ì„ (ë°©ì–´ì )
    - ë² íƒ€ &lt; 0: ì‹œì¥ê³¼ ë°˜ëŒ€ë¡œ ì›€ì§ì„
    &quot;&quot;&quot;
    # ê³µë¶„ì‚° (ê°™ì´ ì›€ì§ì´ëŠ” ì •ë„)
    covariance = asset_returns.cov(market_returns)

    # ì‹œì¥ ë¶„ì‚°
    market_variance = market_returns.var()

    # ë² íƒ€
    beta = covariance / market_variance

    return beta

# ì‚¬ìš© ì˜ˆì‹œ
btc_beta = calculate_beta(returns['BTC'], market_returns)
print(f&quot;BTC ë² íƒ€: {btc_beta:.2f}&quot;)
</code></pre>
<h3 id="33">3.3 ìƒê´€ê´€ê³„ ë¶„ì„</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ë‘ ìì‚° ê°„ ìƒê´€ê´€ê³„
correlation = returns['BTC'].corr(returns['ETH'])
print(f&quot;BTC-ETH ìƒê´€ê´€ê³„: {correlation:.2f}&quot;)

# ëª¨ë“  ìì‚° ê°„ ìƒê´€ê´€ê³„ í–‰ë ¬
corr_matrix = returns.corr()
print(corr_matrix)

# íˆíŠ¸ë§µìœ¼ë¡œ ì‹œê°í™”
import matplotlib.pyplot as plt
import seaborn as sns

plt.figure(figsize=(10, 8))
sns.heatmap(corr_matrix, annot=True, cmap='coolwarm', center=0)
plt.title('ìì‚° ê°„ ìƒê´€ê´€ê³„')
plt.savefig('correlation_heatmap.png')
plt.close()
</code></pre>
<h3 id="34">3.4 íšŒê·€ë¶„ì„ ê¸°ì´ˆ</h3>
<p>íšŒê·€ë¶„ì„ì€ <strong>"Xê°€ Yì— ì–¼ë§ˆë‚˜ ì˜í–¥ì„ ì£¼ë‚˜"</strong>ë¥¼ ë¶„ì„í•˜ëŠ” ê±°ì˜ˆìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">from scipy import stats

def simple_regression(y, x):
    &quot;&quot;&quot;
    ë‹¨ìˆœ íšŒê·€ë¶„ì„
    y = alpha + beta * x + error

    Parameters:
    - y: ì¢…ì†ë³€ìˆ˜ (ì„¤ëª…í•˜ê³  ì‹¶ì€ ê²ƒ)
    - x: ë…ë¦½ë³€ìˆ˜ (ì„¤ëª…í•˜ëŠ” ê²ƒ)

    Returns:
    - alpha: ì ˆí¸ (x=0ì¼ ë•Œ yê°’)
    - beta: ê¸°ìš¸ê¸° (xê°€ 1 ì¦ê°€í•˜ë©´ yê°€ betaë§Œí¼ ë³€í™”)
    - t_stat: t-í†µê³„ëŸ‰ (betaê°€ 0ì´ ì•„ë‹Œì§€ ê²€ì •)
    - p_value: p-ê°’ (ìœ ì˜ì„±)
    - r_squared: ì„¤ëª…ë ¥ (0~1, ë†’ì„ìˆ˜ë¡ ì˜ ì„¤ëª…)
    &quot;&quot;&quot;
    # scipyì˜ linregress ì‚¬ìš©
    slope, intercept, r_value, p_value, std_err = stats.linregress(x, y)

    # t-í†µê³„ëŸ‰
    t_stat = slope / std_err

    return {
        'alpha': intercept,
        'beta': slope,
        't_stat': t_stat,
        'p_value': p_value,
        'r_squared': r_value ** 2
    }

# ì‚¬ìš© ì˜ˆì‹œ: BTC ìˆ˜ìµë¥ ì„ ì‹œì¥ ìˆ˜ìµë¥ ë¡œ ì„¤ëª…
result = simple_regression(returns['BTC'], market_returns)
print(f&quot;ì•ŒíŒŒ: {result['alpha']:.4f}&quot;)
print(f&quot;ë² íƒ€: {result['beta']:.2f}&quot;)
print(f&quot;t-stat: {result['t_stat']:.2f}&quot;)
print(f&quot;p-value: {result['p_value']:.4f}&quot;)
print(f&quot;RÂ²: {result['r_squared']:.2f}&quot;)
</code></pre>
<p><strong>ğŸ’¡ ê²°ê³¼ í•´ì„:</strong>
- <strong>ì•ŒíŒŒ(Î±)</strong>: ì‹œì¥ê³¼ ë¬´ê´€í•œ ì´ˆê³¼ ìˆ˜ìµ. ì–‘ìˆ˜ë©´ ì‹œì¥ì„ ì´ê¹€!
- <strong>ë² íƒ€(Î²)</strong>: ì‹œì¥ ë¯¼ê°ë„. 1ë³´ë‹¤ í¬ë©´ ì‹œì¥ë³´ë‹¤ ë” ì¶œë ì„
- <strong>t-stat</strong>: ì ˆëŒ€ê°’ì´ 2 ì´ìƒì´ë©´ í†µê³„ì ìœ¼ë¡œ ìœ ì˜ë¯¸
- <strong>p-value</strong>: 0.05 ë¯¸ë§Œì´ë©´ ìœ ì˜ë¯¸ (95% ì‹ ë¢°)
- <strong>RÂ²</strong>: 1ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì„¤ëª…ë ¥ ë†’ìŒ</p>
<hr />
<h2 id="4">4. ì•„ì´ë””ì–´ â†’ ë…¼ë¬¸ íë¦„</h2>
<h3 id="41">4.1 ê¸ˆìœµ ë…¼ë¬¸ì˜ ê¸°ë³¸ êµ¬ì¡°</h3>
<pre><code>1. ì„œë¡  (Introduction)
   - ì™œ ì´ ì—°êµ¬ê°€ ì¤‘ìš”í•œê°€?
   - ê¸°ì¡´ ì—°êµ¬ì˜ í•œê³„ëŠ”?
   - ì´ ë…¼ë¬¸ì˜ ê¸°ì—¬ëŠ”?

2. ë¬¸í—Œ ê²€í†  (Literature Review)
   - ê´€ë ¨ ì„ í–‰ ì—°êµ¬ ì •ë¦¬
   - ì´ë¡ ì  ë°°ê²½

3. ë°©ë²•ë¡  (Methodology)
   - ë°ì´í„° ì„¤ëª…
   - ë¶„ì„ ë°©ë²• ì„¤ëª…
   - ìˆ˜ì‹ ì œì‹œ

4. ì‹¤ì¦ ê²°ê³¼ (Empirical Results)
   - ê¸°ìˆ  í†µê³„ëŸ‰
   - ì£¼ìš” ë¶„ì„ ê²°ê³¼
   - ê°•ê±´ì„± ê²€ì¦

5. ê²°ë¡  (Conclusion)
   - ì£¼ìš” ë°œê²¬ ìš”ì•½
   - ì‹œì‚¬ì 
   - í•œê³„ ë° í–¥í›„ ì—°êµ¬
</code></pre>
<h3 id="42">4.2 ì•„ì´ë””ì–´ë¥¼ ì—°êµ¬ ì§ˆë¬¸ìœ¼ë¡œ ë°”ê¾¸ê¸°</h3>
<p><strong>ì˜ˆì‹œ: BACBB ì „ëµì˜ ê²½ìš°</strong></p>
<pre><code>ğŸ’¡ ì•„ì´ë””ì–´:
&quot;ì•”í˜¸í™”íì—ì„œë„ ì €ë² íƒ€ ìì‚°ì´ ê³ ë² íƒ€ ìì‚°ë³´ë‹¤ ì¢‹ì§€ ì•Šì„ê¹Œ?&quot;

â¬‡ï¸

ğŸ“ ì—°êµ¬ ì§ˆë¬¸:
&quot;ì•”í˜¸í™”í ì‹œì¥ì—ì„œ Betting Against Beta ì „ëµì´ ìœ íš¨í•œê°€?&quot;

â¬‡ï¸

ğŸ¯ ê°€ì„¤:
H1: ì €ë² íƒ€ ì•”í˜¸í™”í í¬íŠ¸í´ë¦¬ì˜¤ê°€ ê³ ë² íƒ€ í¬íŠ¸í´ë¦¬ì˜¤ë³´ë‹¤ 
    ìœ„í—˜ ì¡°ì • ìˆ˜ìµë¥ ì´ ë†’ë‹¤.
H2: BAB ì „ëµì˜ ì•ŒíŒŒê°€ í†µê³„ì ìœ¼ë¡œ ìœ ì˜ë¯¸í•˜ê²Œ ì–‘ìˆ˜ì´ë‹¤.

â¬‡ï¸

ğŸ“Š ê²€ì¦ ë°©ë²•:
1. ë² íƒ€ ê³„ì‚° â†’ ìì‚° ë¶„ë¥˜
2. í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„± â†’ ìˆ˜ìµë¥  ê³„ì‚°
3. ì„±ê³¼ ë¹„êµ â†’ í†µê³„ ê²€ì •
</code></pre>
<h3 id="43">4.3 ë¶„ì„ ë‹¨ê³„ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ============================================
# 1ë‹¨ê³„: ë°ì´í„° ìˆ˜ì§‘ ë° ì •ì œ
# ============================================
&quot;&quot;&quot;
â–¡ ë°ì´í„° ì¶œì²˜ ëª…ì‹œ (Yahoo Finance, Binance API ë“±)
â–¡ ë¶„ì„ ê¸°ê°„ ì„¤ì •
â–¡ ê²°ì¸¡ì¹˜ ì²˜ë¦¬ ë°©ë²• ê²°ì •
â–¡ ì´ìƒì¹˜ ì²˜ë¦¬ ë°©ë²• ê²°ì •
â–¡ ìˆ˜ìµë¥  ê³„ì‚° ë°©ë²• ê²°ì • (ë‹¨ìˆœ vs ë¡œê·¸)
&quot;&quot;&quot;

# ============================================
# 2ë‹¨ê³„: ê¸°ìˆ  í†µê³„ëŸ‰
# ============================================
&quot;&quot;&quot;
â–¡ í‰ê· , í‘œì¤€í¸ì°¨, ìµœëŒ€, ìµœì†Œ
â–¡ ì™œë„(Skewness), ì²¨ë„(Kurtosis)
â–¡ ìƒê´€ê´€ê³„
â–¡ ì •ê·œì„± ê²€ì •
&quot;&quot;&quot;

# ============================================
# 3ë‹¨ê³„: í•µì‹¬ ë¶„ì„
# ============================================
&quot;&quot;&quot;
â–¡ ë² íƒ€/íŒ©í„° ê³„ì‚°
â–¡ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±
â–¡ ìˆ˜ìµë¥  ê³„ì‚°
â–¡ ì„±ê³¼ ì§€í‘œ ê³„ì‚°
&quot;&quot;&quot;

# ============================================
# 4ë‹¨ê³„: í†µê³„ ê²€ì •
# ============================================
&quot;&quot;&quot;
â–¡ t-ê²€ì • (í‰ê· ì´ 0ê³¼ ë‹¤ë¥¸ê°€?)
â–¡ íšŒê·€ë¶„ì„ (ì•ŒíŒŒê°€ ìœ ì˜í•œê°€?)
â–¡ ìœ ì˜ìˆ˜ì¤€ í‘œì‹œ (***, **, *)
&quot;&quot;&quot;

# ============================================
# 5ë‹¨ê³„: ê°•ê±´ì„± ê²€ì¦
# ============================================
&quot;&quot;&quot;
â–¡ ë‹¤ë¥¸ ê¸°ê°„ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
â–¡ ë‹¤ë¥¸ ë°©ë²•ë¡ ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
â–¡ Out-of-Sample ê²€ì¦
â–¡ ê±°ë˜ë¹„ìš© ë°˜ì˜
&quot;&quot;&quot;
</code></pre>
<h3 id="44">4.4 ì½”ë“œ êµ¬ì¡° ì„¤ê³„</h3>
<p>ì¢‹ì€ ë¶„ì„ ì½”ë“œëŠ” ì´ëŸ° êµ¬ì¡°ë¥¼ ê°€ì ¸ìš”:</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">&quot;&quot;&quot;
ë…¼ë¬¸ ì œëª©: BACBB ì „ëµ ë¶„ì„
ì €ì: í™ê¸¸ë™
ë‚ ì§œ: 2024-01-01
&quot;&quot;&quot;

# ============================================
# 0. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í¬íŠ¸
# ============================================
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from scipy import stats

# ============================================
# 1. ì„¤ì •
# ============================================
DATA_PATH = './data/'
START_DATE = '2020-01-01'
END_DATE = '2024-12-31'
RISK_FREE_RATE = 0.05  # ì—° 5%

# ============================================
# 2. í•¨ìˆ˜ ì •ì˜
# ============================================
def load_data():
    &quot;&quot;&quot;ë°ì´í„° ë¡œë“œ&quot;&quot;&quot;
    pass

def calculate_beta():
    &quot;&quot;&quot;ë² íƒ€ ê³„ì‚°&quot;&quot;&quot;
    pass

def construct_portfolio():
    &quot;&quot;&quot;í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±&quot;&quot;&quot;
    pass

# ============================================
# 3. ë©”ì¸ ë¶„ì„
# ============================================
if __name__ == &quot;__main__&quot;:
    # ë°ì´í„° ë¡œë“œ
    data = load_data()

    # ë¶„ì„ ì‹¤í–‰
    results = analyze(data)

    # ê²°ê³¼ ì €ì¥
    save_results(results)
</code></pre>
<hr />
<h2 id="5-bacbb">5. BACBB ì½”ë“œ í•œì¤„í•œì¤„ í•´ì„¤</h2>
<p>ì‹¤ì œ BACBB_Analysis.py ì½”ë“œë¥¼ í•œ ì¤„ì”© ì„¤ëª…í• ê²Œìš”.</p>
<h3 id="51">5.1 ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í¬íŠ¸</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">import pandas as pd          # ë°ì´í„° ë¶„ì„ìš© (ì—‘ì…€ ê°™ì€ í‘œ ë‹¤ë£¨ê¸°)
import numpy as np           # ìˆ˜í•™ ê³„ì‚°ìš© (í–‰ë ¬, í†µê³„ ë“±)
import matplotlib.pyplot as plt  # ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
from scipy import stats      # í†µê³„ ê²€ì •ìš©
from numpy.linalg import inv # ì—­í–‰ë ¬ ê³„ì‚°ìš©
import warnings
warnings.filterwarnings('ignore')  # ê²½ê³  ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
</code></pre>
<p><strong>ğŸ’¡ ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—­í• :</strong>
- <code>pandas</code>: CSV íŒŒì¼ ì½ê¸°, ë°ì´í„° ì •ë¦¬, ê³„ì‚°
- <code>numpy</code>: ìˆ˜í•™ ê³„ì‚° (í‰ê· , í‘œì¤€í¸ì°¨, í–‰ë ¬ ì—°ì‚°)
- <code>matplotlib</code>: ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
- <code>scipy.stats</code>: t-ê²€ì •, íšŒê·€ë¶„ì„ ë“± í†µê³„
- <code>numpy.linalg.inv</code>: ì—­í–‰ë ¬ (VAR ëª¨ë¸ì—ì„œ ì‚¬ìš©)</p>
<h3 id="52">5.2 í•œê¸€ í°íŠ¸ ì„¤ì •</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">plt.rcParams['font.family'] = 'Malgun Gothic'  # ìœˆë„ìš°ìš© í•œê¸€ í°íŠ¸
plt.rcParams['axes.unicode_minus'] = False     # ë§ˆì´ë„ˆìŠ¤ ê¸°í˜¸ ê¹¨ì§ ë°©ì§€
</code></pre>
<p><strong>ğŸ’¡ ë§¥ì—ì„œëŠ”?</strong></p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">plt.rcParams['font.family'] = 'AppleGothic'
</code></pre>
<h3 id="53">5.3 ë°ì´í„° ë¡œë“œ</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># CSV íŒŒì¼ ì½ê¸°
prices = pd.read_csv('04_daily_prices.csv',    # íŒŒì¼ ê²½ë¡œ
                     index_col=0,               # ì²« ë²ˆì§¸ ì—´ì„ ì¸ë±ìŠ¤ë¡œ
                     parse_dates=True)          # ë‚ ì§œë¡œ ì¸ì‹

returns = pd.read_csv('06_daily_returns.csv', index_col=0, parse_dates=True)
volumes = pd.read_csv('05_daily_volumes.csv', index_col=0, parse_dates=True)
funding = pd.read_csv('08_daily_funding_rate.csv', index_col=0, parse_dates=True)
</code></pre>
<p><strong>ğŸ’¡ ê° ë°ì´í„° ì„¤ëª…:</strong>
- <code>prices</code>: ì¼ë³„ ê°€ê²© (BTC 50000, ETH 3000 ë“±)
- <code>returns</code>: ì¼ë³„ ìˆ˜ìµë¥  (0.05 = 5% ìƒìŠ¹)
- <code>volumes</code>: ì¼ë³„ ê±°ë˜ëŸ‰
- <code>funding</code>: í€ë”©ë¹„ (ì„ ë¬¼ ê±°ë˜ ë¹„ìš©)</p>
<h3 id="54">5.4 ê³µí†µ ìì‚° ì°¾ê¸°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ëª¨ë“  ë°ì´í„°ì— ê³µí†µìœ¼ë¡œ ìˆëŠ” ìì‚°ë§Œ ì„ íƒ
common = list(set(prices.columns) &amp; set(returns.columns) &amp; 
              set(volumes.columns) &amp; set(funding.columns))
common = sorted(common)  # ì•ŒíŒŒë²³ ìˆœ ì •ë ¬
print(f&quot;ë¶„ì„ ìì‚°: {len(common)}ê°œ&quot;)
</code></pre>
<p><strong>ğŸ’¡ ì™œ ì´ë ‡ê²Œ í•˜ë‚˜ìš”?</strong>
- ì–´ë–¤ ë°ì´í„°ì—ëŠ” BTCê°€ ìˆê³  ì–´ë–¤ ë°ì´í„°ì—ëŠ” ì—†ì„ ìˆ˜ ìˆì–´ìš”
- ëª¨ë“  ë°ì´í„°ì— ê³µí†µìœ¼ë¡œ ìˆëŠ” ìì‚°ë§Œ ë¶„ì„í•´ì•¼ ì˜¤ë¥˜ê°€ ì•ˆ ë‚˜ìš”
- <code>set()</code>: ì¤‘ë³µ ì œê±°, <code>&amp;</code>: êµì§‘í•©</p>
<h3 id="55">5.5 ê²°ì¸¡ì¹˜ ì²˜ë¦¬</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ìˆ˜ìµë¥ : NaNì„ 0ìœ¼ë¡œ, ê·¹ë‹¨ê°’ ì œí•œ
returns = returns.fillna(0).clip(-0.5, 0.5)

# í€ë”©ë¹„: ì•ì˜ ê°’ìœ¼ë¡œ ì±„ìš°ê¸°
funding = funding.fillna(method='ffill').fillna(0)
</code></pre>
<p><strong>ğŸ’¡ ì™œ clip(-0.5, 0.5)?</strong>
- í•˜ë£¨ì— -50% ~ +50% ì´ìƒ ì›€ì§ì´ë©´ ë°ì´í„° ì˜¤ë¥˜ì¼ ê°€ëŠ¥ì„± ë†’ìŒ
- ê·¹ë‹¨ê°’ì´ ë¶„ì„ì„ ì™œê³¡í•  ìˆ˜ ìˆì–´ì„œ ì œí•œ</p>
<h3 id="56">5.6 ì‹œì¥ ìˆ˜ìµë¥  ê³„ì‚°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ê±°ë˜ëŸ‰ ê°€ì¤‘ í‰ê·  ìˆ˜ìµë¥  = ì‹œì¥ ìˆ˜ìµë¥ 
vol_weights = volumes.div(volumes.sum(axis=1), axis=0).fillna(1/len(common))
market_ret = (returns * vol_weights).sum(axis=1)
</code></pre>
<p><strong>ğŸ’¡ í•œ ì¤„ì”© ì„¤ëª…:</strong></p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># 1. ê° ìì‚°ì˜ ê±°ë˜ëŸ‰ ë¹„ì¤‘ ê³„ì‚°
vol_weights = volumes.div(volumes.sum(axis=1), axis=0)
# volumes.sum(axis=1): ê° ë‚ ì§œë³„ ì „ì²´ ê±°ë˜ëŸ‰
# .div(..., axis=0): ê° ìì‚° ê±°ë˜ëŸ‰ / ì „ì²´ ê±°ë˜ëŸ‰
# ê²°ê³¼: BTC 0.4, ETH 0.3, ... (í•©ì´ 1)

# 2. ê°€ì¤‘ í‰ê·  ìˆ˜ìµë¥ 
market_ret = (returns * vol_weights).sum(axis=1)
# returns * vol_weights: ê° ìì‚° ìˆ˜ìµë¥  Ã— ë¹„ì¤‘
# .sum(axis=1): ë‚ ì§œë³„ë¡œ í•©ì‚°
# ê²°ê³¼: ì‹œì¥ ì „ì²´ ìˆ˜ìµë¥ 
</code></pre>
<h3 id="57-var">5.7 VAR ëª¨ë¸ ìƒíƒœë³€ìˆ˜ êµ¬ì„±</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># ìƒíƒœë³€ìˆ˜ 1: ì‹œì¥ ì´ˆê³¼ìˆ˜ìµë¥ 
market_excess = market_ret - rf_daily

# ìƒíƒœë³€ìˆ˜ 2: ê¸°ê°„ ìŠ¤í”„ë ˆë“œ (ì¥ê¸°ê¸ˆë¦¬ - ë‹¨ê¸°ê¸ˆë¦¬)
term_spread = (treasury['DGS10'] - treasury['DGS3MO'])

# ìƒíƒœë³€ìˆ˜ 3: ë°¸ë¥˜ì—ì´ì…˜ (ê³¼ê±° ìˆ˜ìµë¥ ì˜ ìŒìˆ˜)
valuation = -prices.mean(axis=1).pct_change(periods=500).fillna(0)
</code></pre>
<p><strong>ğŸ’¡ ì™œ ì´ëŸ° ë³€ìˆ˜ë“¤ì„ ì“°ë‚˜ìš”?</strong>
- <strong>ì‹œì¥ ì´ˆê³¼ìˆ˜ìµë¥ </strong>: í˜„ì¬ ì‹œì¥ ìƒí™©
- <strong>ê¸°ê°„ ìŠ¤í”„ë ˆë“œ</strong>: ê²½ê¸° ì „ë§ (ë†’ìœ¼ë©´ ê²½ê¸° ì¢‹ì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒ)
- <strong>ë°¸ë¥˜ì—ì´ì…˜</strong>: ê³¼ê±°ì— ë§ì´ ì˜¬ëìœ¼ë©´ ê³ í‰ê°€ (ìŒìˆ˜ë¡œ ë°”ê¿”ì„œ ì‚¬ìš©)</p>
<h3 id="58-var-cash-flow-news">5.8 VAR ëª¨ë¸ë¡œ Cash-Flow News ì¶”ì¶œ</h3>
<p>ì´ ë¶€ë¶„ì´ ë…¼ë¬¸ì˜ í•µì‹¬ì´ì—ìš”!</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def estimate_var_and_news(state_df, window=252):
    &quot;&quot;&quot;
    VAR(1) ëª¨ë¸ ì¶”ì • ë° Cash-Flow News ì¶”ì¶œ

    Campbell-Shiller ë¶„í•´:
    - ì‹œì¥ ìˆ˜ìµë¥  = ì˜ˆìƒ ìˆ˜ìµë¥  + ì˜ˆìƒì¹˜ ëª»í•œ ìˆ˜ìµë¥ 
    - ì˜ˆìƒì¹˜ ëª»í•œ ìˆ˜ìµë¥  = Cash-Flow News - Discount Rate News
    &quot;&quot;&quot;

    # í• ì¸ìœ¨ (ì¼ê°„)
    rho = 0.997  # ì—°ê°„ ì•½ 0.95ì— í•´ë‹¹

    for i in range(window, len(dates)):
        # ìœˆë„ìš° ë°ì´í„° (ìµœê·¼ 252ì¼)
        z = state_df.iloc[i-window:i].values

        # VAR(1) ì¶”ì •: z_t = c + A * z_{t-1} + u_t
        z_lag = z[:-1]   # ì–´ì œ ë°ì´í„°
        z_curr = z[1:]   # ì˜¤ëŠ˜ ë°ì´í„°

        # OLS íšŒê·€ë¡œ A í–‰ë ¬ ì¶”ì •
        X = np.column_stack([np.ones(len(z_lag)), z_lag])
        beta = np.linalg.lstsq(X, z_curr, rcond=None)[0]
        A = beta[1:].T

        # ì”ì°¨ (ì˜ˆìƒì¹˜ ëª»í•œ ë¶€ë¶„)
        residuals = z_curr - X @ beta
        u_t = residuals[-1]  # ì˜¤ëŠ˜ì˜ ì”ì°¨

        # Campbell-Shiller ë¶„í•´
        I = np.eye(n_vars)  # ë‹¨ìœ„í–‰ë ¬
        inv_term = inv(I - rho * A)  # (I - ÏA)^(-1)

        # Discount Rate News
        dr_news.iloc[i] = e1 @ (rho * A @ inv_term) @ u_t

        # Cash-Flow News = ì´ ë‰´ìŠ¤ + DR News
        cf_news.iloc[i] = u_t[0] + dr_news.iloc[i]

    return cf_news, dr_news
</code></pre>
<p><strong>ğŸ’¡ ì‰½ê²Œ ì„¤ëª…í•˜ë©´:</strong>
1. ê³¼ê±° ë°ì´í„°ë¡œ "ë‚´ì¼ ì‹œì¥ì´ ì–´ë–¨ì§€" ì˜ˆì¸¡í•˜ëŠ” ëª¨ë¸(VAR)ì„ ë§Œë“¦
2. ì‹¤ì œ ìˆ˜ìµë¥  - ì˜ˆì¸¡ ìˆ˜ìµë¥  = ì˜ˆìƒì¹˜ ëª»í•œ ë‰´ìŠ¤
3. ì´ ë‰´ìŠ¤ë¥¼ ë‘ ê°€ì§€ë¡œ ë¶„í•´:
   - <strong>Cash-Flow News</strong>: íšŒì‚¬ ì‹¤ì  ê°™ì€ ì˜êµ¬ì  ì¶©ê²©
   - <strong>Discount Rate News</strong>: ê¸ˆë¦¬ ë³€í™” ê°™ì€ ì¼ì‹œì  ì¶©ê²©</p>
<h3 id="59-cash-flow-beta">5.9 Cash-Flow Beta ê³„ì‚°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def estimate_cf_beta(ret_df, cf_news_series, window=60):
    &quot;&quot;&quot;
    Cash-Flow Beta (Bad Beta) ì¶”ì •

    Î²_CF = Cov(ìì‚°ìˆ˜ìµë¥ , Cash-Flow News) / Var(Cash-Flow News)
    &quot;&quot;&quot;

    for i in range(window, len(dates)):
        cf_window = cf_arr[i-window:i]      # ìµœê·¼ 60ì¼ CF News
        var_cf = np.var(cf_window)          # CF Newsì˜ ë¶„ì‚°

        for j in range(len(cols)):
            r_window = ret_arr[i-window:i, j]  # ìì‚°ì˜ ìµœê·¼ 60ì¼ ìˆ˜ìµë¥ 

            # ê³µë¶„ì‚° / ë¶„ì‚° = ë² íƒ€
            cov_cf = np.cov(r_window, cf_window)[0, 1]
            cf_beta.iloc[i, j] = cov_cf / var_cf

    # Shrinkage (ê·¹ë‹¨ê°’ ì™„í™”)
    cf_beta = cf_beta * 0.6 + 0.4  # 1 ë°©í–¥ìœ¼ë¡œ ë‹¹ê¸°ê¸°
    cf_beta = cf_beta.clip(0.1, 3.0)  # ë²”ìœ„ ì œí•œ

    return cf_beta
</code></pre>
<p><strong>ğŸ’¡ ì™œ Shrinkageë¥¼ í•˜ë‚˜ìš”?</strong>
- ë² íƒ€ ì¶”ì •ì—ëŠ” ì˜¤ì°¨ê°€ ìˆì–´ìš”
- ê·¹ë‹¨ì ì¸ ë² íƒ€ê°’ì€ ì˜¤ì°¨ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŒ
- 1 ë°©í–¥ìœ¼ë¡œ ë‹¹ê²¨ì„œ ì˜¤ì°¨ë¥¼ ì¤„ì„ (Vasicek adjustment)</p>
<h3 id="510-bacbb">5.10 BACBB í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def construct_bacbb_factor(ret_df, cf_b, fp_b, fund_df, rf, mkt_ret):
    &quot;&quot;&quot;
    BACBB íŒ©í„° êµ¬ì„±

    ìˆ˜ì‹: r_BACBB = Î²_L^(-1) * (r_L - rf) - Î²_H^(-1) * (r_H - rf)

    - Long: Low CF Beta (í˜„ê¸ˆíë¦„ ì¶©ê²©ì— ë°©ì–´ë ¥)
    - Short: High CF Beta (í˜„ê¸ˆíë¦„ ì¶©ê²©ì— ì·¨ì•½)
    &quot;&quot;&quot;

    # ë¹„ëŒ€ì¹­ ë¹„ì¤‘ (ë¡± 70%, ìˆ 30%)
    LONG_WEIGHT = 0.7
    SHORT_WEIGHT = 0.3

    # ë§¤ì£¼ ë¦¬ë°¸ëŸ°ì‹±
    for week in weeks:
        # ì²« ê±°ë˜ì¼ì˜ ë² íƒ€ë¡œ ìì‚° ë¶„ë¥˜
        cfb = cf_b.loc[first_day].dropna()

        # ìƒìœ„/í•˜ìœ„ 25% ì„ ì •
        n_quartile = len(cfb) // 4
        cfb_sorted = cfb.sort_values()

        low_cfb = list(cfb_sorted.index[:n_quartile])   # ì €ë² íƒ€ (ë¡±)
        high_cfb = list(cfb_sorted.index[-n_quartile:]) # ê³ ë² íƒ€ (ìˆ)

        # í¬íŠ¸í´ë¦¬ì˜¤ ë² íƒ€ë¡œ ë ˆë²„ë¦¬ì§€ ì¡°ì ˆ
        beta_L = fp_b[low_cfb].mean()
        beta_H = fp_b[high_cfb].mean()

        inv_beta_L = 1.0 / beta_L  # ë² íƒ€ ì—­ìˆ˜ = ë ˆë²„ë¦¬ì§€
        inv_beta_H = 1.0 / beta_H

        # ì¼ë³„ ìˆ˜ìµë¥  ê³„ì‚°
        for date in week_dates:
            r_long = ret_df.loc[date, low_cfb].mean()   # ë¡± í¬íŠ¸í´ë¦¬ì˜¤ ìˆ˜ìµë¥ 
            r_short = ret_df.loc[date, high_cfb].mean() # ìˆ í¬íŠ¸í´ë¦¬ì˜¤ ìˆ˜ìµë¥ 

            # BACBB ìˆ˜ìµë¥ 
            long_pnl = LONG_WEIGHT * inv_beta_L * (r_long - rf_t)
            short_pnl = SHORT_WEIGHT * inv_beta_H * (-r_short + rf_t)

            bacbb_ret.loc[date] = long_pnl + short_pnl

    return bacbb_ret
</code></pre>
<p><strong>ğŸ’¡ í•µì‹¬ ê°œë…:</strong></p>
<ol>
<li><strong>ì™œ ë² íƒ€ ì—­ìˆ˜ë¡œ ê³±í•˜ë‚˜ìš”?</strong></li>
<li>ì €ë² íƒ€ ìì‚°ì€ ëœ ì›€ì§ì´ë‹ˆê¹Œ ë” ë§ì´ íˆ¬ì (ë ˆë²„ë¦¬ì§€)</li>
<li>ê³ ë² íƒ€ ìì‚°ì€ ë§ì´ ì›€ì§ì´ë‹ˆê¹Œ ì ê²Œ íˆ¬ì</li>
<li>
<p>ì´ë ‡ê²Œ í•˜ë©´ "ë² íƒ€ ì¤‘ë¦½" í¬íŠ¸í´ë¦¬ì˜¤ê°€ ë¨</p>
</li>
<li>
<p><strong>ì™œ ë¡± 70%, ìˆ 30%?</strong></p>
</li>
<li>ì•”í˜¸í™”íëŠ” ì „ë°˜ì ìœ¼ë¡œ ìƒìŠ¹ ì¶”ì„¸</li>
<li>
<p>ìˆ ë¹„ì¤‘ì„ ì¤„ì—¬ì„œ ìƒìŠ¹ì¥ì—ì„œë„ ìˆ˜ìµ</p>
</li>
<li>
<p><strong>ë¦¬ë°¸ëŸ°ì‹±ì´ ë­ì˜ˆìš”?</strong></p>
</li>
<li>ë§¤ì£¼ ë² íƒ€ë¥¼ ë‹¤ì‹œ ê³„ì‚°í•´ì„œ í¬íŠ¸í´ë¦¬ì˜¤ ì¬êµ¬ì„±</li>
<li>ë² íƒ€ëŠ” ì‹œê°„ì— ë”°ë¼ ë³€í•˜ë‹ˆê¹Œ</li>
</ol>
<h3 id="511">5.11 ì„±ê³¼ ì§€í‘œ ê³„ì‚°</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def calc_metrics(ret, rf, name=&quot;Strategy&quot;):
    &quot;&quot;&quot;ì „ëµ ì„±ê³¼ ì§€í‘œ ê³„ì‚°&quot;&quot;&quot;

    ret = ret.dropna()
    rf_aligned = rf.reindex(ret.index).fillna(0)
    excess_ret = ret - rf_aligned  # ì´ˆê³¼ ìˆ˜ìµë¥ 

    # ì—°ê°„í™”
    ann_ret = ret.mean() * 252           # ì—°ê°„ ìˆ˜ìµë¥ 
    ann_vol = ret.std() * np.sqrt(252)   # ì—°ê°„ ë³€ë™ì„±

    # ìƒ¤í”„ ë¹„ìœ¨
    sharpe = ann_ret / ann_vol

    # ì†Œë¥´í‹°ë…¸ ë¹„ìœ¨ (í•˜ë½ ë³€ë™ì„±ë§Œ ê³ ë ¤)
    downside = ret[ret &lt; 0]
    downside_vol = downside.std() * np.sqrt(252)
    sortino = ann_ret / downside_vol

    # ëˆ„ì  ìˆ˜ìµë¥ 
    cum_ret = (1 + ret).cumprod()
    total_ret = cum_ret.iloc[-1] - 1

    # ìµœëŒ€ ë‚™í­ (MDD)
    rolling_max = cum_ret.cummax()
    drawdown = (cum_ret - rolling_max) / rolling_max
    mdd = drawdown.min()

    # ì¹¼ë§ˆ ë¹„ìœ¨ (ìˆ˜ìµë¥  / MDD)
    calmar = ann_ret / abs(mdd)

    # ìŠ¹ë¥ 
    win_rate = (ret &gt; 0).mean()

    # t-ê²€ì • (ìˆ˜ìµë¥ ì´ 0ê³¼ ë‹¤ë¥¸ê°€?)
    n = len(ret)
    mean_ret = ret.mean()
    se = ret.std() / np.sqrt(n)  # í‘œì¤€ì˜¤ì°¨
    t_stat = mean_ret / se
    p_value = 2 * (1 - stats.t.cdf(abs(t_stat), n-1))

    return {
        'ann_ret': ann_ret,
        'ann_vol': ann_vol,
        'sharpe': sharpe,
        'sortino': sortino,
        'calmar': calmar,
        'total_ret': total_ret,
        'mdd': mdd,
        'win_rate': win_rate,
        't_stat': t_stat,
        'p_value': p_value
    }
</code></pre>
<p><strong>ğŸ’¡ ê° ì§€í‘œ í•´ì„:</strong></p>
<table>
<thead>
<tr>
<th>ì§€í‘œ</th>
<th>ê³„ì‚°</th>
<th>ì˜ë¯¸</th>
</tr>
</thead>
<tbody>
<tr>
<td>ì—°ê°„ ìˆ˜ìµë¥ </td>
<td>ì¼í‰ê·  Ã— 252</td>
<td>1ë…„ ê¸°ëŒ€ ìˆ˜ìµ</td>
</tr>
<tr>
<td>ì—°ê°„ ë³€ë™ì„±</td>
<td>ì¼í‘œì¤€í¸ì°¨ Ã— âˆš252</td>
<td>1ë…„ ê¸°ëŒ€ ë³€ë™í­</td>
</tr>
<tr>
<td>ìƒ¤í”„ ë¹„ìœ¨</td>
<td>ìˆ˜ìµë¥  / ë³€ë™ì„±</td>
<td>ìœ„í—˜ ëŒ€ë¹„ ìˆ˜ìµ</td>
</tr>
<tr>
<td>ì†Œë¥´í‹°ë…¸</td>
<td>ìˆ˜ìµë¥  / í•˜ë½ë³€ë™ì„±</td>
<td>ì†ì‹¤ ìœ„í—˜ ëŒ€ë¹„ ìˆ˜ìµ</td>
</tr>
<tr>
<td>MDD</td>
<td>ìµœê³ ì  ëŒ€ë¹„ ìµœëŒ€ í•˜ë½</td>
<td>ìµœì•…ì˜ ì†ì‹¤</td>
</tr>
<tr>
<td>ì¹¼ë§ˆ ë¹„ìœ¨</td>
<td>ìˆ˜ìµë¥  / MDD</td>
<td>MDD ëŒ€ë¹„ ìˆ˜ìµ</td>
</tr>
<tr>
<td>t-stat</td>
<td>í‰ê·  / í‘œì¤€ì˜¤ì°¨</td>
<td>í†µê³„ì  ìœ ì˜ì„±</td>
</tr>
</tbody>
</table>
<h3 id="512-5">5.12 5ë¶„ìœ„ ë¶„ì„</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def quintile_analysis(ret_df, beta_df, name=&quot;Beta&quot;):
    &quot;&quot;&quot;
    ë² íƒ€ ê¸°ì¤€ 5ë¶„ìœ„ í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„

    Q1: ë² íƒ€ ê°€ì¥ ë‚®ì€ 20%
    Q2: ë² íƒ€ ë‚®ì€ 20%
    Q3: ë² íƒ€ ì¤‘ê°„ 20%
    Q4: ë² íƒ€ ë†’ì€ 20%
    Q5: ë² íƒ€ ê°€ì¥ ë†’ì€ 20%
    &quot;&quot;&quot;

    quintile_returns = {f'Q{i}': [] for i in range(1, 6)}

    for month in months:
        # ì›”ì´ˆ ë² íƒ€ë¡œ ë¶„ë¥˜
        b = beta_df.loc[first_day].dropna()
        b_sorted = b.sort_values()

        # 5ë“±ë¶„
        quintiles = np.array_split(b_sorted.index, 5)

        # ê° ë¶„ìœ„ë³„ ìˆ˜ìµë¥  ê³„ì‚°
        for date in month_dates:
            for i, q_assets in enumerate(quintiles):
                q_ret = ret_df.loc[date, q_assets].mean()
                quintile_returns[f'Q{i+1}'].append(q_ret)

    # Q1-Q5 ìŠ¤í”„ë ˆë“œ (ì €ë² íƒ€ - ê³ ë² íƒ€)
    spread = Q1_returns - Q5_returns

    return results
</code></pre>
<p><strong>ğŸ’¡ ì™œ 5ë¶„ìœ„ ë¶„ì„ì„ í•˜ë‚˜ìš”?</strong>
- "ì €ë² íƒ€ê°€ ì •ë§ ì¢‹ì€ê°€?"ë¥¼ ê²€ì¦
- Q1(ì €ë² íƒ€)ì´ Q5(ê³ ë² íƒ€)ë³´ë‹¤ ìˆ˜ìµë¥ ì´ ë†’ìœ¼ë©´ ê°€ì„¤ ì§€ì§€
- Q1-Q5 ìŠ¤í”„ë ˆë“œê°€ ì–‘ìˆ˜ì´ê³  ìœ ì˜í•˜ë©´ ì „ëµì´ ìœ íš¨</p>
<hr />
<h2 id="6">6. í†µê³„ ê²€ì • ë°©ë²•</h2>
<h3 id="61-t-0">6.1 t-ê²€ì • (í‰ê· ì´ 0ê³¼ ë‹¤ë¥¸ê°€?)</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">from scipy import stats

def t_test(returns):
    &quot;&quot;&quot;
    ë‹¨ì¼ í‘œë³¸ t-ê²€ì •

    H0 (ê·€ë¬´ê°€ì„¤): í‰ê·  ìˆ˜ìµë¥  = 0 (ì „ëµì´ íš¨ê³¼ ì—†ìŒ)
    H1 (ëŒ€ë¦½ê°€ì„¤): í‰ê·  ìˆ˜ìµë¥  â‰  0 (ì „ëµì´ íš¨ê³¼ ìˆìŒ)
    &quot;&quot;&quot;
    n = len(returns)
    mean = returns.mean()
    std = returns.std()
    se = std / np.sqrt(n)  # í‘œì¤€ì˜¤ì°¨

    # t-í†µê³„ëŸ‰
    t_stat = mean / se

    # p-ê°’ (ì–‘ì¸¡ ê²€ì •)
    p_value = 2 * (1 - stats.t.cdf(abs(t_stat), n-1))

    return t_stat, p_value

# ì‚¬ìš© ì˜ˆì‹œ
t, p = t_test(bacbb_returns)
print(f&quot;t-stat: {t:.2f}&quot;)
print(f&quot;p-value: {p:.4f}&quot;)

# í•´ì„
if p &lt; 0.01:
    print(&quot;*** 1% ìˆ˜ì¤€ì—ì„œ ìœ ì˜ (ë§¤ìš° ê°•í•œ ì¦ê±°)&quot;)
elif p &lt; 0.05:
    print(&quot;** 5% ìˆ˜ì¤€ì—ì„œ ìœ ì˜ (ê°•í•œ ì¦ê±°)&quot;)
elif p &lt; 0.10:
    print(&quot;* 10% ìˆ˜ì¤€ì—ì„œ ìœ ì˜ (ì•½í•œ ì¦ê±°)&quot;)
else:
    print(&quot;ìœ ì˜í•˜ì§€ ì•ŠìŒ&quot;)
</code></pre>
<p><strong>ğŸ’¡ ì‰½ê²Œ ì„¤ëª…:</strong>
- t-stat ì ˆëŒ€ê°’ì´ 2 ì´ìƒì´ë©´ ëŒ€ëµ ìœ ì˜
- p-valueê°€ 0.05 ë¯¸ë§Œì´ë©´ "ìš°ì—°ì´ ì•„ë‹ˆë‹¤"ë¼ê³  95% í™•ì‹ </p>
<h3 id="62">6.2 íšŒê·€ë¶„ì„ (ì•ŒíŒŒ ê²€ì •)</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">from scipy import stats

def alpha_test(strategy_returns, market_returns, rf):
    &quot;&quot;&quot;
    CAPM íšŒê·€ë¶„ì„ìœ¼ë¡œ ì•ŒíŒŒ ê²€ì •

    r_strategy - rf = alpha + beta * (r_market - rf) + error

    alpha &gt; 0ì´ê³  ìœ ì˜í•˜ë©´: ì‹œì¥ì„ ì´ê¸°ëŠ” ì „ëµ!
    &quot;&quot;&quot;
    # ì´ˆê³¼ ìˆ˜ìµë¥ 
    excess_strategy = strategy_returns - rf
    excess_market = market_returns - rf

    # íšŒê·€ë¶„ì„
    slope, intercept, r_value, p_value, std_err = stats.linregress(
        excess_market, excess_strategy
    )

    # ì•ŒíŒŒì˜ t-í†µê³„ëŸ‰
    n = len(excess_strategy)
    residuals = excess_strategy - (intercept + slope * excess_market)
    mse = (residuals ** 2).sum() / (n - 2)
    se_alpha = np.sqrt(mse / n)
    t_alpha = intercept / se_alpha
    p_alpha = 2 * (1 - stats.t.cdf(abs(t_alpha), n-2))

    return {
        'alpha': intercept * 252,  # ì—°ê°„í™”
        'beta': slope,
        't_stat': t_alpha,
        'p_value': p_alpha,
        'r_squared': r_value ** 2
    }

# ì‚¬ìš© ì˜ˆì‹œ
result = alpha_test(bacbb_returns, market_returns, rf_daily)
print(f&quot;ì—°ê°„ ì•ŒíŒŒ: {result['alpha']*100:.2f}%&quot;)
print(f&quot;ë² íƒ€: {result['beta']:.2f}&quot;)
print(f&quot;t-stat: {result['t_stat']:.2f}&quot;)
print(f&quot;p-value: {result['p_value']:.4f}&quot;)
</code></pre>
<h3 id="63">6.3 ìœ ì˜ìˆ˜ì¤€ ë³„í‘œ í‘œì‹œ</h3>
<p>ë…¼ë¬¸ì—ì„œ í”íˆ ì“°ëŠ” í‘œê¸°ë²•:</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def get_significance_stars(p_value):
    &quot;&quot;&quot;
    p-valueì— ë”°ë¥¸ ìœ ì˜ìˆ˜ì¤€ ë³„í‘œ

    ***: p &lt; 0.01 (99% ì‹ ë¢°)
    **:  p &lt; 0.05 (95% ì‹ ë¢°)
    *:   p &lt; 0.10 (90% ì‹ ë¢°)
    &quot;&quot;&quot;
    if p_value &lt; 0.01:
        return &quot;***&quot;
    elif p_value &lt; 0.05:
        return &quot;**&quot;
    elif p_value &lt; 0.10:
        return &quot;*&quot;
    else:
        return &quot;&quot;

# ì‚¬ìš© ì˜ˆì‹œ
stars = get_significance_stars(0.023)  # &quot;**&quot;
print(f&quot;ìˆ˜ìµë¥ : 15.2%{stars}&quot;)  # &quot;ìˆ˜ìµë¥ : 15.2%**&quot;
</code></pre>
<h3 id="64-newey-west">6.4 Newey-West í‘œì¤€ì˜¤ì°¨</h3>
<p>ì‹œê³„ì—´ ë°ì´í„°ëŠ” ìê¸°ìƒê´€ì´ ìˆì–´ì„œ ì¼ë°˜ í‘œì¤€ì˜¤ì°¨ê°€ ë¶€ì •í™•í•´ìš”.</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def newey_west_tstat(returns, lags=5):
    &quot;&quot;&quot;
    Newey-West ì¡°ì • t-í†µê³„ëŸ‰

    ìê¸°ìƒê´€ì„ ê³ ë ¤í•œ ë” ì •í™•í•œ í‘œì¤€ì˜¤ì°¨
    &quot;&quot;&quot;
    n = len(returns)
    mean = returns.mean()

    # ìê¸°ê³µë¶„ì‚° ê³„ì‚°
    gamma = []
    for j in range(lags + 1):
        if j == 0:
            gamma.append(((returns - mean) ** 2).sum() / n)
        else:
            gamma.append(((returns[j:] - mean) * (returns[:-j] - mean)).sum() / n)

    # Newey-West ë¶„ì‚°
    nw_var = gamma[0]
    for j in range(1, lags + 1):
        weight = 1 - j / (lags + 1)  # Bartlett ê°€ì¤‘ì¹˜
        nw_var += 2 * weight * gamma[j]

    # í‘œì¤€ì˜¤ì°¨
    nw_se = np.sqrt(nw_var / n)

    # t-í†µê³„ëŸ‰
    t_stat = mean / nw_se

    return t_stat

# ì‚¬ìš© ì˜ˆì‹œ
t_nw = newey_west_tstat(bacbb_returns)
print(f&quot;Newey-West t-stat: {t_nw:.2f}&quot;)
</code></pre>
<h3 id="65-out-of-sample">6.5 Out-of-Sample ê²€ì¦</h3>
<p>ê³¼ì í•©(overfitting)ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ê²€ì¦:</p>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def out_of_sample_test(returns):
    &quot;&quot;&quot;
    In-Sample / Out-of-Sample ë¶„ë¦¬ ê²€ì¦

    - ì „ë°˜ë¶€ë¡œ ì „ëµ ê°œë°œ (In-Sample)
    - í›„ë°˜ë¶€ë¡œ ê²€ì¦ (Out-of-Sample)
    &quot;&quot;&quot;
    # ë°ì´í„° ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ê¸°
    split_idx = len(returns) // 2

    in_sample = returns.iloc[:split_idx]
    out_of_sample = returns.iloc[split_idx:]

    # ê°ê° ì„±ê³¼ ê³„ì‚°
    is_sharpe = in_sample.mean() / in_sample.std() * np.sqrt(252)
    oos_sharpe = out_of_sample.mean() / out_of_sample.std() * np.sqrt(252)

    print(f&quot;In-Sample ìƒ¤í”„: {is_sharpe:.2f}&quot;)
    print(f&quot;Out-of-Sample ìƒ¤í”„: {oos_sharpe:.2f}&quot;)

    # OOS ìƒ¤í”„ê°€ ISì˜ 50% ì´ìƒì´ë©´ ì–‘í˜¸
    ratio = oos_sharpe / is_sharpe if is_sharpe != 0 else 0
    print(f&quot;OOS/IS ë¹„ìœ¨: {ratio:.1%}&quot;)

    return is_sharpe, oos_sharpe

# ì‚¬ìš© ì˜ˆì‹œ
is_s, oos_s = out_of_sample_test(bacbb_returns)
</code></pre>
<p><strong>ğŸ’¡ ì™œ ì¤‘ìš”í•œê°€ìš”?</strong>
- In-Sampleì—ì„œë§Œ ì¢‹ìœ¼ë©´ ê³¼ì í•©ì¼ ìˆ˜ ìˆìŒ
- Out-of-Sampleì—ì„œë„ ì¢‹ì•„ì•¼ ì§„ì§œ ìœ íš¨í•œ ì „ëµ
- OOS ìƒ¤í”„ê°€ ISì˜ 50% ì´ìƒì´ë©´ ê´œì°®ì€ í¸</p>
<hr />
<h2 id="7">7. ê·¸ë˜í”„ì™€ í‘œ ë§Œë“¤ê¸°</h2>
<h3 id="71">7.1 ê¸°ë³¸ ê·¸ë˜í”„ ì„¤ì •</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">import matplotlib.pyplot as plt

# í•œê¸€ í°íŠ¸ ì„¤ì •
plt.rcParams['font.family'] = 'Malgun Gothic'  # ìœˆë„ìš°
# plt.rcParams['font.family'] = 'AppleGothic'  # ë§¥
plt.rcParams['axes.unicode_minus'] = False

# ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì •
plt.rcParams['figure.figsize'] = (12, 6)  # ê·¸ë˜í”„ í¬ê¸°
plt.rcParams['font.size'] = 12            # ê¸€ì í¬ê¸°
</code></pre>
<h3 id="72">7.2 ëˆ„ì  ìˆ˜ìµë¥  ê·¸ë˜í”„</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def plot_cumulative_returns(returns_dict, title=&quot;ëˆ„ì  ìˆ˜ìµë¥ &quot;):
    &quot;&quot;&quot;
    ì—¬ëŸ¬ ì „ëµì˜ ëˆ„ì  ìˆ˜ìµë¥  ë¹„êµ ê·¸ë˜í”„

    Parameters:
    - returns_dict: {'ì „ëµëª…': ìˆ˜ìµë¥ Series} í˜•íƒœ
    &quot;&quot;&quot;
    fig, ax = plt.subplots(figsize=(12, 6))

    colors = ['blue', 'red', 'green', 'orange', 'purple']

    for i, (name, returns) in enumerate(returns_dict.items()):
        # ëˆ„ì  ìˆ˜ìµë¥  ê³„ì‚°
        cumulative = (1 + returns).cumprod()

        # ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
        ax.plot(cumulative.index, cumulative.values, 
                label=name, color=colors[i % len(colors)], linewidth=1.5)

    ax.axhline(y=1, color='black', linestyle='--', alpha=0.3)  # ê¸°ì¤€ì„ 
    ax.set_title(title, fontsize=14)
    ax.set_xlabel('ë‚ ì§œ')
    ax.set_ylabel('ëˆ„ì  ìˆ˜ìµë¥ ')
    ax.legend(loc='upper left')
    ax.grid(True, alpha=0.3)

    plt.tight_layout()
    plt.savefig('cumulative_returns.png', dpi=150)
    plt.close()

# ì‚¬ìš© ì˜ˆì‹œ
plot_cumulative_returns({
    'BACBB': bacbb_returns,
    'BACB': bacb_returns,
    'Buy &amp; Hold': bh_returns
})
</code></pre>
<h3 id="73">7.3 ë“œë¡œìš°ë‹¤ìš´ ê·¸ë˜í”„</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def plot_drawdown(returns, title=&quot;ë“œë¡œìš°ë‹¤ìš´&quot;):
    &quot;&quot;&quot;ìµœëŒ€ ë‚™í­ ì‹œê°í™”&quot;&quot;&quot;

    fig, ax = plt.subplots(figsize=(12, 5))

    # ëˆ„ì  ìˆ˜ìµë¥ 
    cumulative = (1 + returns).cumprod()

    # ë“œë¡œìš°ë‹¤ìš´ ê³„ì‚°
    rolling_max = cumulative.cummax()
    drawdown = (cumulative - rolling_max) / rolling_max * 100

    # ê·¸ë˜í”„
    ax.fill_between(drawdown.index, drawdown, 0, color='red', alpha=0.3)
    ax.plot(drawdown.index, drawdown, color='red', linewidth=1)

    ax.set_title(f'{title} (MDD: {drawdown.min():.1f}%)', fontsize=14)
    ax.set_xlabel('ë‚ ì§œ')
    ax.set_ylabel('ë“œë¡œìš°ë‹¤ìš´ (%)')
    ax.grid(True, alpha=0.3)

    plt.tight_layout()
    plt.savefig('drawdown.png', dpi=150)
    plt.close()

# ì‚¬ìš© ì˜ˆì‹œ
plot_drawdown(bacbb_returns, &quot;BACBB ë“œë¡œìš°ë‹¤ìš´&quot;)
</code></pre>
<h3 id="74">7.4 ì—°ë„ë³„ ìˆ˜ìµë¥  ë§‰ëŒ€ ê·¸ë˜í”„</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def plot_yearly_returns(returns, title=&quot;ì—°ë„ë³„ ìˆ˜ìµë¥ &quot;):
    &quot;&quot;&quot;ì—°ë„ë³„ ìˆ˜ìµë¥  ë§‰ëŒ€ ê·¸ë˜í”„&quot;&quot;&quot;

    fig, ax = plt.subplots(figsize=(10, 6))

    # ì—°ë„ë³„ ìˆ˜ìµë¥  ê³„ì‚°
    yearly = returns.groupby(returns.index.year).apply(
        lambda x: (1 + x).prod() - 1
    ) * 100

    # ìƒ‰ìƒ (ì–‘ìˆ˜=ì´ˆë¡, ìŒìˆ˜=ë¹¨ê°•)
    colors = ['green' if r &gt; 0 else 'red' for r in yearly]

    # ë§‰ëŒ€ ê·¸ë˜í”„
    ax.bar(yearly.index.astype(str), yearly.values, 
           color=colors, alpha=0.7, edgecolor='black')

    ax.axhline(y=0, color='black', linewidth=0.5)
    ax.set_title(title, fontsize=14)
    ax.set_xlabel('ì—°ë„')
    ax.set_ylabel('ìˆ˜ìµë¥  (%)')

    # ê°’ í‘œì‹œ
    for i, (year, ret) in enumerate(yearly.items()):
        ax.text(i, ret + (2 if ret &gt; 0 else -4), f'{ret:.1f}%', 
                ha='center', fontsize=10)

    plt.tight_layout()
    plt.savefig('yearly_returns.png', dpi=150)
    plt.close()

# ì‚¬ìš© ì˜ˆì‹œ
plot_yearly_returns(bacbb_returns, &quot;BACBB ì—°ë„ë³„ ìˆ˜ìµë¥ &quot;)
</code></pre>
<h3 id="75">7.5 ìˆ˜ìµë¥  ë¶„í¬ íˆìŠ¤í† ê·¸ë¨</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def plot_distribution(returns, title=&quot;ìˆ˜ìµë¥  ë¶„í¬&quot;):
    &quot;&quot;&quot;ìˆ˜ìµë¥  ë¶„í¬ íˆìŠ¤í† ê·¸ë¨&quot;&quot;&quot;

    fig, ax = plt.subplots(figsize=(10, 6))

    # íˆìŠ¤í† ê·¸ë¨
    ax.hist(returns * 100, bins=50, alpha=0.7, 
            color='blue', edgecolor='black', density=True)

    # í‰ê· ì„ 
    mean_ret = returns.mean() * 100
    ax.axvline(x=mean_ret, color='red', linestyle='--', 
               linewidth=2, label=f'í‰ê· : {mean_ret:.3f}%')

    # 0 ê¸°ì¤€ì„ 
    ax.axvline(x=0, color='black', linestyle='-', linewidth=1)

    ax.set_title(title, fontsize=14)
    ax.set_xlabel('ì¼ê°„ ìˆ˜ìµë¥  (%)')
    ax.set_ylabel('ë¹ˆë„')
    ax.legend()

    # í†µê³„ ì •ë³´ ì¶”ê°€
    stats_text = f&quot;&quot;&quot;
    í‰ê· : {returns.mean()*100:.3f}%
    í‘œì¤€í¸ì°¨: {returns.std()*100:.2f}%
    ì™œë„: {returns.skew():.2f}
    ì²¨ë„: {returns.kurtosis():.2f}
    &quot;&quot;&quot;
    ax.text(0.02, 0.98, stats_text, transform=ax.transAxes,
            verticalalignment='top', fontfamily='monospace',
            bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.5))

    plt.tight_layout()
    plt.savefig('distribution.png', dpi=150)
    plt.close()

# ì‚¬ìš© ì˜ˆì‹œ
plot_distribution(bacbb_returns, &quot;BACBB ìˆ˜ìµë¥  ë¶„í¬&quot;)
</code></pre>
<h3 id="76-latex">7.6 ë…¼ë¬¸ìš© í‘œ ë§Œë“¤ê¸° (LaTeX)</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def create_latex_table(data, caption, label):
    &quot;&quot;&quot;
    ë…¼ë¬¸ìš© LaTeX í‘œ ìƒì„±

    Parameters:
    - data: DataFrame
    - caption: í‘œ ì œëª©
    - label: ì°¸ì¡°ìš© ë¼ë²¨
    &quot;&quot;&quot;

    latex = f&quot;&quot;&quot;
\\begin{{table}}[htbp]
\\centering
\\caption{{{caption}}}
\\label{{{label}}}
\\begin{{tabular}}{{{'l' + 'c' * (len(data.columns))}}}
\\toprule
&quot;&quot;&quot;

    # í—¤ë”
    latex += &quot; &amp; &quot;.join([&quot;&quot;] + list(data.columns)) + &quot; \\\\\n&quot;
    latex += &quot;\\midrule\n&quot;

    # ë°ì´í„°
    for idx, row in data.iterrows():
        values = [str(idx)]
        for val in row:
            if isinstance(val, float):
                values.append(f&quot;{val:.2f}&quot;)
            else:
                values.append(str(val))
        latex += &quot; &amp; &quot;.join(values) + &quot; \\\\\n&quot;

    latex += &quot;&quot;&quot;\\bottomrule
\\end{tabular}
\\end{table}
&quot;&quot;&quot;

    return latex

# ì‚¬ìš© ì˜ˆì‹œ
performance_df = pd.DataFrame({
    'Ann. Return': [15.2, 12.1, 8.5],
    'Volatility': [18.3, 22.1, 35.2],
    'Sharpe': [0.83, 0.55, 0.24]
}, index=['BACBB', 'BACB', 'B&amp;H'])

latex_code = create_latex_table(
    performance_df, 
    &quot;Strategy Performance Comparison&quot;,
    &quot;tab:performance&quot;
)
print(latex_code)
</code></pre>
<h3 id="77-html">7.7 HTML í‘œ ë§Œë“¤ê¸° (ë¸Œë¼ìš°ì €ìš©)</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;">def create_html_table(data, title):
    &quot;&quot;&quot;ë¸Œë¼ìš°ì €ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” HTML í‘œ&quot;&quot;&quot;

    html = f&quot;&quot;&quot;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;style&gt;
        body {{ font-family: Arial, sans-serif; padding: 20px; }}
        table {{ border-collapse: collapse; width: 100%; }}
        th, td {{ border: 1px solid #ddd; padding: 12px; text-align: center; }}
        th {{ background-color: #4CAF50; color: white; }}
        tr:nth-child(even) {{ background-color: #f2f2f2; }}
        tr:hover {{ background-color: #ddd; }}
        h2 {{ color: #333; }}
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;{title}&lt;/h2&gt;
    {data.to_html(classes='styled-table')}
&lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;

    with open('table.html', 'w', encoding='utf-8') as f:
        f.write(html)

    print(&quot;table.html ì €ì¥ ì™„ë£Œ!&quot;)

# ì‚¬ìš© ì˜ˆì‹œ
create_html_table(performance_df, &quot;ì „ëµ ì„±ê³¼ ë¹„êµ&quot;)
</code></pre>
<hr />
<h2 id="8">8. ì‹¤ì „ íŒê³¼ ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜</h2>
<h3 id="81">8.1 ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ë“¤</h3>
<h4 id="1-look-ahead-bias">âŒ ì‹¤ìˆ˜ 1: Look-Ahead Bias (ë¯¸ë˜ ì •ë³´ ì‚¬ìš©)</h4>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># âŒ ì˜ëª»ëœ ì½”ë“œ: ë¯¸ë˜ ë°ì´í„°ë¡œ ë² íƒ€ ê³„ì‚°
beta = returns.rolling(60).apply(lambda x: x.cov(market) / market.var())
# ë¬¸ì œ: rollingì€ í˜„ì¬ ì‹œì  í¬í•¨! ë¯¸ë˜ë¥¼ ë³¸ ê²ƒ

# âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ: shiftë¡œ í•˜ë£¨ ë°€ê¸°
beta = returns.shift(1).rolling(60).apply(...)
# ì–´ì œê¹Œì§€ì˜ ë°ì´í„°ë¡œë§Œ ê³„ì‚°
</code></pre>
<h4 id="2-survivorship-bias">âŒ ì‹¤ìˆ˜ 2: Survivorship Bias (ìƒì¡´ì í¸í–¥)</h4>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># âŒ ì˜ëª»ëœ ì˜ˆ: í˜„ì¬ ì¡´ì¬í•˜ëŠ” ì½”ì¸ë§Œ ë¶„ì„
# ìƒì¥íì§€ëœ ì½”ì¸ì€ ë³´í†µ ì„±ê³¼ê°€ ë‚˜ë¹´ìŒ
# ì´ê±¸ ë¹¼ë©´ ì„±ê³¼ê°€ ê³¼ëŒ€í‰ê°€ë¨

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ìƒì¥íì§€ ì½”ì¸ë„ í¬í•¨
# ë°ì´í„° ìˆ˜ì§‘ ì‹œ ê³¼ê±° ëª¨ë“  ì½”ì¸ í¬í•¨
</code></pre>
<h4 id="3_1">âŒ ì‹¤ìˆ˜ 3: ê±°ë˜ë¹„ìš© ë¬´ì‹œ</h4>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># âŒ ì˜ëª»ëœ ì½”ë“œ: ê±°ë˜ë¹„ìš© ì—†ì´ ê³„ì‚°
portfolio_return = long_return - short_return

# âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ: ê±°ë˜ë¹„ìš© ë°˜ì˜
TRADING_FEE = 0.0004  # 0.04%
turnover = calculate_turnover()  # íšŒì „ìœ¨
trading_cost = turnover * TRADING_FEE * 2  # ë§¤ìˆ˜+ë§¤ë„
portfolio_return = long_return - short_return - trading_cost
</code></pre>
<h4 id="4_1">âŒ ì‹¤ìˆ˜ 4: ë°ì´í„° ìŠ¤ëˆ„í•‘ (ê³¼ì í•©)</h4>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># âŒ ì˜ëª»ëœ ë°©ë²•: ì „ì²´ ë°ì´í„°ë¡œ íŒŒë¼ë¯¸í„° ìµœì í™”
best_window = optimize_window(all_data)  # ì „ì²´ ë°ì´í„° ì‚¬ìš©

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: In-Sampleë¡œë§Œ ìµœì í™”
train_data = all_data[:len(all_data)//2]
test_data = all_data[len(all_data)//2:]

best_window = optimize_window(train_data)  # í›ˆë ¨ ë°ì´í„°ë§Œ
test_performance = evaluate(test_data, best_window)  # í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦
</code></pre>
<h3 id="82">8.2 ë””ë²„ê¹… íŒ</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># 1. ë°ì´í„° í™•ì¸
print(df.head())        # ì²˜ìŒ 5ì¤„
print(df.tail())        # ë§ˆì§€ë§‰ 5ì¤„
print(df.shape)         # (í–‰, ì—´) í¬ê¸°
print(df.info())        # ë°ì´í„° íƒ€ì…, ê²°ì¸¡ì¹˜
print(df.describe())    # ê¸°ë³¸ í†µê³„

# 2. ê²°ì¸¡ì¹˜ í™•ì¸
print(df.isna().sum())  # ì—´ë³„ ê²°ì¸¡ì¹˜ ê°œìˆ˜
print(df.isna().any())  # ê²°ì¸¡ì¹˜ ìˆëŠ” ì—´

# 3. ì¤‘ê°„ ê²°ê³¼ ì¶œë ¥
def calculate_something(data):
    step1 = data * 2
    print(f&quot;Step 1 ê²°ê³¼: {step1.head()}&quot;)  # ì¤‘ê°„ í™•ì¸

    step2 = step1.rolling(20).mean()
    print(f&quot;Step 2 ê²°ê³¼: {step2.head()}&quot;)  # ì¤‘ê°„ í™•ì¸

    return step2

# 4. assertë¡œ ê°€ì • í™•ì¸
assert len(returns) == len(prices) - 1, &quot;ìˆ˜ìµë¥  ê¸¸ì´ ì˜¤ë¥˜!&quot;
assert returns.isna().sum().sum() == 0, &quot;ê²°ì¸¡ì¹˜ ìˆìŒ!&quot;
assert (weights.sum(axis=1) - 1).abs().max() &lt; 0.01, &quot;ë¹„ì¤‘ í•©ì´ 1ì´ ì•„ë‹˜!&quot;
</code></pre>
<h3 id="83">8.3 ì½”ë“œ ì •ë¦¬ íŒ</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># 1. ìƒìˆ˜ëŠ” ë§¨ ìœ„ì— ëŒ€ë¬¸ìë¡œ
TRADING_FEE = 0.0004
RISK_FREE_RATE = 0.05
REBALANCE_FREQ = 'W'  # Weekly

# 2. í•¨ìˆ˜ì— docstring ì“°ê¸°
def calculate_sharpe(returns, rf=0):
    &quot;&quot;&quot;
    ìƒ¤í”„ ë¹„ìœ¨ ê³„ì‚°

    Parameters:
    -----------
    returns : pd.Series
        ì¼ê°„ ìˆ˜ìµë¥ 
    rf : float
        ë¬´ìœ„í—˜ ìˆ˜ìµë¥  (ì—°ê°„, ê¸°ë³¸ê°’ 0)

    Returns:
    --------
    float
        ì—°ê°„í™”ëœ ìƒ¤í”„ ë¹„ìœ¨
    &quot;&quot;&quot;
    excess = returns - rf/252
    return excess.mean() / excess.std() * np.sqrt(252)

# 3. ì˜ë¯¸ ìˆëŠ” ë³€ìˆ˜ëª…
# âŒ ë‚˜ìœ ì˜ˆ
x = df['BTC'].pct_change()
y = x.rolling(20).std()

# âœ… ì¢‹ì€ ì˜ˆ
btc_returns = df['BTC'].pct_change()
btc_volatility = btc_returns.rolling(20).std()
</code></pre>
<h3 id="84">8.4 ì„±ëŠ¥ ìµœì í™” íŒ</h3>
<pre><code class="language-python" style="background:#f8f8f8; display:block; padding:10px; border-radius:5px; overflow-x:auto;"># 1. ë²¡í„° ì—°ì‚° ì‚¬ìš© (for ë£¨í”„ í”¼í•˜ê¸°)
# âŒ ëŠë¦° ì½”ë“œ
result = []
for i in range(len(df)):
    result.append(df.iloc[i]['A'] * df.iloc[i]['B'])

# âœ… ë¹ ë¥¸ ì½”ë“œ
result = df['A'] * df['B']

# 2. apply ëŒ€ì‹  ë‚´ì¥ í•¨ìˆ˜
# âŒ ëŠë¦° ì½”ë“œ
df['return'] = df['price'].apply(lambda x: x / df['price'].shift(1) - 1)

# âœ… ë¹ ë¥¸ ì½”ë“œ
df['return'] = df['price'].pct_change()

# 3. í° ë°ì´í„°ëŠ” ì²­í¬ë¡œ ì²˜ë¦¬
# ë©”ëª¨ë¦¬ ë¶€ì¡±í•  ë•Œ
for chunk in pd.read_csv('big_file.csv', chunksize=10000):
    process(chunk)
</code></pre>
<h3 id="85">8.5 ë…¼ë¬¸ ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
<pre><code>â–¡ ë°ì´í„°
  â–¡ ì¶œì²˜ ëª…ì‹œ
  â–¡ ê¸°ê°„ ëª…ì‹œ
  â–¡ ê²°ì¸¡ì¹˜ ì²˜ë¦¬ ë°©ë²• ì„¤ëª…
  â–¡ ì´ìƒì¹˜ ì²˜ë¦¬ ë°©ë²• ì„¤ëª…

â–¡ ë°©ë²•ë¡ 
  â–¡ ìˆ˜ì‹ ì œì‹œ
  â–¡ íŒŒë¼ë¯¸í„° ì„¤ëª…
  â–¡ ë¦¬ë°¸ëŸ°ì‹± ì£¼ê¸° ëª…ì‹œ
  â–¡ ê±°ë˜ë¹„ìš© ë°˜ì˜ ì—¬ë¶€

â–¡ ê²°ê³¼
  â–¡ ê¸°ìˆ  í†µê³„ëŸ‰ í‘œ
  â–¡ ì£¼ìš” ê²°ê³¼ í‘œ
  â–¡ ìœ ì˜ìˆ˜ì¤€ í‘œì‹œ (***, **, *)
  â–¡ ê·¸ë˜í”„ (ëˆ„ì ìˆ˜ìµë¥ , ë“œë¡œìš°ë‹¤ìš´ ë“±)

â–¡ ê°•ê±´ì„±
  â–¡ ë‹¤ë¥¸ ê¸°ê°„ í…ŒìŠ¤íŠ¸
  â–¡ Out-of-Sample ê²€ì¦
  â–¡ ë‹¤ë¥¸ íŒŒë¼ë¯¸í„° í…ŒìŠ¤íŠ¸
  â–¡ ê±°ë˜ë¹„ìš© ë¯¼ê°ë„ ë¶„ì„

â–¡ ì½”ë“œ
  â–¡ ì¬í˜„ ê°€ëŠ¥í•˜ê²Œ ì •ë¦¬
  â–¡ ì£¼ì„ ë‹¬ê¸°
  â–¡ README ì‘ì„±
</code></pre>
<hr />
<h2 id="_3">ğŸ¯ ë§ˆë¬´ë¦¬</h2>
<p>ì´ ê°€ì´ë“œë¥¼ ë”°ë¼í•˜ë©´ì„œ ì¤‘ìš”í•œ ê²ƒ:</p>
<ol>
<li><strong>ì²œì²œíˆ, í•œ ì¤„ì”©</strong> - ê¸‰í•˜ê²Œ í•˜ë©´ ì˜¤ë¥˜ ë‚¨</li>
<li><strong>ì¤‘ê°„ì¤‘ê°„ í™•ì¸</strong> - print()ë¡œ ê²°ê³¼ í™•ì¸</li>
<li><strong>ì—ëŸ¬ ë©”ì‹œì§€ ì½ê¸°</strong> - êµ¬ê¸€ì— ê²€ìƒ‰í•˜ë©´ ë‹µ ë‚˜ì˜´</li>
<li><strong>ì‘ì€ ê²ƒë¶€í„°</strong> - ê°„ë‹¨í•œ ë¶„ì„ë¶€í„° ì‹œì‘</li>
</ol>
<p>ì²˜ìŒì—” ì–´ë µì§€ë§Œ, ëª‡ ë²ˆ í•´ë³´ë©´ íŒ¨í„´ì´ ë³´ì—¬ìš”. í™”ì´íŒ…! ğŸš€</p>
<hr />
<h2 id="_4">ğŸ“– ì¶”ê°€ í•™ìŠµ ìë£Œ</h2>
<ul>
<li><strong>íŒŒì´ì¬ ê¸°ì´ˆ</strong>: <a href="https://wikidocs.net/book/1">ì í”„ íˆ¬ íŒŒì´ì¬</a></li>
<li><strong>pandas</strong>: <a href="https://pandas.pydata.org/docs/user_guide/10min.html">10 Minutes to pandas</a></li>
<li><strong>ê¸ˆìœµ ë¶„ì„</strong>: <a href="https://www.quantstart.com/">QuantStart</a></li>
<li><strong>í†µê³„</strong>: <a href="https://www.khanacademy.org/math/statistics-probability">Khan Academy Statistics</a></li>
</ul>
<hr />
<p><em>ì´ ê°€ì´ë“œëŠ” BACBB í”„ë¡œì íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</em>
<em>ì§ˆë¬¸ì´ ìˆìœ¼ë©´ ì½”ë“œì™€ í•¨ê»˜ êµ¬ì²´ì ìœ¼ë¡œ ë¬¼ì–´ë³´ì„¸ìš”!</em></p>
    
    <footer style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #eee; color: #888; text-align: center;">
        <p>BACBB í”„ë¡œì íŠ¸ ê¸°ë°˜ íŒŒì´ì¬ ê¸ˆìœµë…¼ë¬¸ ê°€ì´ë“œ</p>
    </footer>
</body>
</html>
